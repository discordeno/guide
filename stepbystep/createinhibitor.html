<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Creating Inhibitors! | Discordeno</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/favicon.png">
    <meta name="description" content="Docs for Discordeno">
    <meta name="theme-color" content="#7289DA">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="og:title" content="Discordeno">
    <meta name="og:description" content="Docs for Discordeno">
    <meta name="og:type" content="website">
    <meta name="og:url" content="https://discordeno.mod.land">
    <meta name="og:image" content="/logo.png">
    
    <link rel="preload" href="/assets/css/0.styles.1ace810b.css" as="style"><link rel="preload" href="/assets/js/app.8602c3b1.js" as="script"><link rel="preload" href="/assets/js/2.c3f83916.js" as="script"><link rel="preload" href="/assets/js/23.19666387.js" as="script"><link rel="prefetch" href="/assets/js/10.f93f5f86.js"><link rel="prefetch" href="/assets/js/11.fe86a36b.js"><link rel="prefetch" href="/assets/js/12.c903e79c.js"><link rel="prefetch" href="/assets/js/13.3f3d521f.js"><link rel="prefetch" href="/assets/js/14.394ad220.js"><link rel="prefetch" href="/assets/js/15.b3e5a027.js"><link rel="prefetch" href="/assets/js/16.0e08dc19.js"><link rel="prefetch" href="/assets/js/17.ba5c0e61.js"><link rel="prefetch" href="/assets/js/18.35e3171e.js"><link rel="prefetch" href="/assets/js/19.089bf84f.js"><link rel="prefetch" href="/assets/js/20.bf6398b8.js"><link rel="prefetch" href="/assets/js/21.2f96d382.js"><link rel="prefetch" href="/assets/js/22.5174c019.js"><link rel="prefetch" href="/assets/js/24.6122ade6.js"><link rel="prefetch" href="/assets/js/25.11f7aa3a.js"><link rel="prefetch" href="/assets/js/26.5e7538c8.js"><link rel="prefetch" href="/assets/js/27.e461b487.js"><link rel="prefetch" href="/assets/js/3.9cc5bc97.js"><link rel="prefetch" href="/assets/js/4.08ebecdc.js"><link rel="prefetch" href="/assets/js/5.f91ebf3d.js"><link rel="prefetch" href="/assets/js/6.54055031.js"><link rel="prefetch" href="/assets/js/7.986ab081.js"><link rel="prefetch" href="/assets/js/8.0cce8522.js"><link rel="prefetch" href="/assets/js/9.19f61a0a.js">
    <link rel="stylesheet" href="/assets/css/0.styles.1ace810b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Discordeno</span></a> <div class="links"><!----> <div class="user-settings"><a href="#" class="settings-button"><svg aria-hidden="true" data-prefix="fas" data-icon="cog" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="svg-inline--fa fa-cog fa-w-16 settings-icon"><path fill="currentColor" d="M444.788 291.1l42.616 24.599c4.867 2.809 7.126 8.618 5.459 13.985-11.07 35.642-29.97 67.842-54.689 94.586a12.016 12.016 0 0 1-14.832 2.254l-42.584-24.595a191.577 191.577 0 0 1-60.759 35.13v49.182a12.01 12.01 0 0 1-9.377 11.718c-34.956 7.85-72.499 8.256-109.219.007-5.49-1.233-9.403-6.096-9.403-11.723v-49.184a191.555 191.555 0 0 1-60.759-35.13l-42.584 24.595a12.016 12.016 0 0 1-14.832-2.254c-24.718-26.744-43.619-58.944-54.689-94.586-1.667-5.366.592-11.175 5.459-13.985L67.212 291.1a193.48 193.48 0 0 1 0-70.199l-42.616-24.599c-4.867-2.809-7.126-8.618-5.459-13.985 11.07-35.642 29.97-67.842 54.689-94.586a12.016 12.016 0 0 1 14.832-2.254l42.584 24.595a191.577 191.577 0 0 1 60.759-35.13V25.759a12.01 12.01 0 0 1 9.377-11.718c34.956-7.85 72.499-8.256 109.219-.007 5.49 1.233 9.403 6.096 9.403 11.723v49.184a191.555 191.555 0 0 1 60.759 35.13l42.584-24.595a12.016 12.016 0 0 1 14.832 2.254c24.718 26.744 43.619 58.944 54.689 94.586 1.667 5.366-.592 11.175-5.459 13.985L444.788 220.9a193.485 193.485 0 0 1 0 70.2zM336 256c0-44.112-35.888-80-80-80s-80 35.888-80 80 35.888 80 80 80 80-35.888 80-80z"></path></svg></a> <div class="user-settings-menu" style="display:none;"><div class="theme-options"><!----> <!----> <div class="dark-theme-options toggle-option"><label for="dark-theme-toggle">Enable Dark Theme?</label> <input id="dark-theme-toggle" type="checkbox"></div> <!----> <!----></div></div></div> <!----> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="https://doc.deno.land/https/deno.land/x/discordeno/mod.ts" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Docs
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://discord.gg/5vBgXk3UcZ" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Discord
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/discordeno/guide" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="https://doc.deno.land/https/deno.land/x/discordeno/mod.ts" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Docs
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://discord.gg/5vBgXk3UcZ" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Discord
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/discordeno/guide" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Home</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Step By Step Guide</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/stepbystep/" aria-current="page" class="sidebar-link">Step By Step Guide</a></li><li><a href="/stepbystep/createbot.html" class="sidebar-link">Creating The Bot!</a></li><li><a href="/stepbystep/createcommand.html" class="sidebar-link">Creating A Command</a></li><li><a href="/stepbystep/createevent.html" class="sidebar-link">Creating Events!</a></li><li><a href="/stepbystep/createlanguage.html" class="sidebar-link">Creating Languages!</a></li><li><a href="/stepbystep/createmonitor.html" class="sidebar-link">Creating Monitors!</a></li><li><a href="/stepbystep/createinhibitor.html" aria-current="page" class="active sidebar-link">Creating Inhibitors!</a></li><li><a href="/stepbystep/createtask.html" class="sidebar-link">Creating Tasks</a></li><li><a href="/stepbystep/hostingbot.html" class="sidebar-link">Hosting Your Bot Online 24/7!</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Advanced Guide</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="creating-inhibitors"><a href="#creating-inhibitors" class="header-anchor">#</a> Creating Inhibitors!</h1> <p>Woah! You are almost half way done with understanding all of Discordeno. Amazing
isn't it? Something you may have noticed in the last section was there were some
options that prevented some commands from running like <code>dmOnly</code> or the
permission options. We created a setting to prevent the monitor from running in
certain channels. What if we wanted to do prevent commands from happening? How
would we prevent commands from running?</p> <h2 id="what-is-an-inhibitor"><a href="#what-is-an-inhibitor" class="header-anchor">#</a> What is an Inhibitor?</h2> <p>Inhibitors are very similar to how monitors work. A monitor runs on every
message but an inhibitor runs on every command. Remember all those command
options like cooldown, permissions, permissionLevel, nsfw, etc... each and every
one of these options has an inhibitor that checks commands for these settings.</p> <p>Let's create our own inhibitor that would prevent commands from being used if
the user is not a VIP user.</p> <blockquote><p><strong>Note:</strong> It is important to remember that everything below can be done with a
simple permission level as well. We will create our own custom permission
levels but for the purposes of this guide and to be able to learn about
Inhibitors, we will be using an inhibitor.</p></blockquote> <h2 id="creating-the-file"><a href="#creating-the-file" class="header-anchor">#</a> Creating the File</h2> <p>Let's start by creating a file inside the inhibitors folder called <code>boosted.ts</code>
and paste the following snippet of code:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> botCache <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../../deps.ts&quot;</span><span class="token punctuation">;</span>

botCache<span class="token punctuation">.</span>inhibitors<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span>
  <span class="token string">&quot;inhibitorname&quot;</span><span class="token punctuation">,</span>
  <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>message<span class="token punctuation">,</span> command<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Your code goes here</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Inhibitors can take up to 3 arguments.</p> <ul><li><code>message</code>: The message object that triggered the command.</li> <li><code>command</code>: The command object itself that was triggered.</li></ul> <h2 id="understanding-how-inhibitors-function"><a href="#understanding-how-inhibitors-function" class="header-anchor">#</a> Understanding How Inhibitors Function</h2> <p>To block a command you have to return a truthy value.</p> <ul><li><strong>return true;</strong> If you return true the inhibitor will block the execution of
the command. To allow a command return a falsey value.</li> <li><strong>return false;</strong> If you return false the inhibitor will not block the error.</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// If the command is not VIP only we can allow this command to execute</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>command<span class="token punctuation">.</span>vipOnly<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

<span class="token comment">// The bot's support server</span>
<span class="token keyword">const</span> guild <span class="token operator">=</span> cache<span class="token punctuation">.</span>guilds<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span>configs<span class="token punctuation">.</span>supportServerID<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// If the command author is not in the server they won't have the vip role</span>
<span class="token keyword">const</span> member <span class="token operator">=</span> message<span class="token punctuation">.</span>member <span class="token operator">||</span>
  <span class="token keyword">await</span> <span class="token function">getMember</span><span class="token punctuation">(</span>guild<span class="token punctuation">.</span>id<span class="token punctuation">,</span> message<span class="token punctuation">.</span>author<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token builtin">console</span><span class="token punctuation">.</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Member doesn't exist so cancel the command</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>member<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  message<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span>
    <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Sorry, but you can not use this command until you become VIP. **Close the IRIS!!!**</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// If the user has the vip role on the support server given by patreon allow the command</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>
  member<span class="token punctuation">.</span>guilds<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span>guildId<span class="token punctuation">)</span><span class="token operator">?.</span>roles<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>
    configs<span class="token punctuation">.</span>roleIDs<span class="token punctuation">.</span>patreonVIPRoleID<span class="token punctuation">,</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Alert the user they don't have vip and can't use the command</span>
message<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span>
  <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Sorry, but you can not use this command until you become a VIP. I'm sorry, Teal'c. We'll go to Disneyland next year. I promise.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Cancel the command since the user does not have vip</span>
<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="updating-command-typings"><a href="#updating-command-typings" class="header-anchor">#</a> Updating Command Typings</h2> <p>Since we need a new option on our commands we need to add that. Open the
<code>src/types/commands.ts</code> file and add in the following</p> <div class="language-ts extra-class"><pre class="language-ts"><code>vipOnly<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
</code></pre></div><p>Once that is added, you can go into any command and mark them as vip only
commands.</p> <h2 id="challenges"><a href="#challenges" class="header-anchor">#</a> Challenges</h2> <p>Hell yes! We just got through the entire inhibitor section. You have now
mastered everything related to inhibitors.</p> <p>You can now try and get a little more practice with inhibitors by trying to
challenge yourself and make your own inhibitors. Don't worry if you can't think
of any good use cases for inhibitors.</p> <p>Majority of Discordeno bots do not use many custom inhibitors because most of
the necessary/important ones already come built for you in the inhibitors
folder.</p> <p>Next we will try our hands on creating tasks.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/discordeno/guide/edit/main/src/stepbystep/createinhibitor.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">5/21/2021, 4:24:39 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/stepbystep/createmonitor.html" class="prev">
        Creating Monitors!
      </a></span> <span class="next"><a href="/stepbystep/createtask.html">
        Creating Tasks
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.8602c3b1.js" defer></script><script src="/assets/js/2.c3f83916.js" defer></script><script src="/assets/js/23.19666387.js" defer></script>
  </body>
</html>
